# Mouse Direction Sync (Wayland)

Графічний додаток для Wayland, що утримує клавіші **A** або **D** відповідно до напрямку руху миші чи тачпада. Інструмент читає

події пристроїв через `libinput` та емулює натискання клавіш за допомогою `uinput`. Ви можете прив'язати власну клавішу активації,

налаштувати ступінь рандомізації синхронізації та перемикати світлу/темну тему.

## Можливості

- Відстеження горизонтального руху в Wayland через `libinput` без залежності від X11.
- Автоматичне натискання `A` при русі вліво та `D` при русі вправо (через віртуальну клавіатуру `uinput`).
- Клавіша активації з довільним вибором: поки клавішу затиснуто — працює емулювання, після відпускання — миттєвий стоп.
- Режим рандомізації з настроюваним діапазоном синхронізації (наприклад 70–90 %).
- Охайний інтерфейс Qt із перемикачем світлої/темної теми.

## Повний гайд з підготовки середовища (Arch Linux)

1. **Встановіть пакунки для збірки і роботи:**
   ```bash
   sudo pacman -S --needed qt6-base cmake ninja gcc pkgconf libinput seatd
   ```

2. **Увімкніть `seatd`, щоб надавати доступ до пристроїв введення без root:**
   ```bash
   sudo systemctl enable --now seatd.service
   ```

3. **Створіть групу `uinput` (якщо ще не існує) і додайте свій обліковий запис до потрібних груп:**
   ```bash
   sudo groupadd -r uinput 2>/dev/null || true
   sudo gpasswd -a "$USER" input
   sudo gpasswd -a "$USER" uinput
   ```

4. **Створіть правила udev для коректних прав доступу:**
   ```bash
   sudo tee /etc/udev/rules.d/99-input-perms.rules >/dev/null <<'RULES'
   KERNEL=="event*", GROUP="input", MODE="0660"
   KERNEL=="uinput", GROUP="uinput", MODE="0660"
   RULES
   sudo udevadm control --reload
   sudo udevadm trigger --subsystem-match=input
   ```

5. **Вийдіть із сеансу та зайдіть знову**, щоб оновилися групи користувача.

6. **Клонуйте репозиторій та зберіть проєкт:**
   ```bash
   git clone https://github.com/<your-account>/mouse-direction-sync.git
   cd mouse-direction-sync
   cmake -S . -B build -G Ninja
   cmake --build build
   ```

7. **Запускайте програму у Wayland-сеансі через `seatd-launch` (рекомендовано):**
   ```bash
   seatd-launch -- ./build/mouse_direction_binder
   ```
   Якщо `seatd` недоступний, можна запустити від `root`, але це менш безпечно:
   ```bash
   sudo QT_QPA_PLATFORM=wayland ./build/mouse_direction_binder
   ```

> **Примітка:** Програма працює лише у Wayland-сеансах. Для коректного рендеру Qt переконайтеся, що змінна `QT_QPA_PLATFORM` встановлена

> в `wayland` (Qt робить це автоматично у більшості сучасних середовищ KDE/GNOME).

## Використання

1. Запустіть додаток.
2. Виберіть зручну клавішу активації (попередньо вона — `Left Shift`).
3. За потреби увімкніть рандомізацію синхронізації та відрегулюйте мінімальний/максимальний відсоток.
4. Утримуйте клавішу активації, рухаючи мишею: ліворуч — утримується `A`, праворуч — `D`.
5. Відпустіть клавішу, щоб миттєво припинити емулювання.

## Усунення несправностей

- **Немає доступу до пристроїв введення:** перевірте, що користувач належить до груп `input` та `uinput`, а `seatd` запущений.
- **`seatd-launch` не знайдено:** переконайтеся, що пакет `seatd` встановлено; двійковий файл може називатися `seatd-launch` або `seatd` залежно від пакування.
- **Qt запускається у XWayland:** задайте `QT_QPA_PLATFORM=wayland` перед запуском.

## Безпека та відповідальність

Додаток генерує штучні натискання клавіш. Використовуйте його на власний розсуд та враховуйте політики сервісів чи ігор, у яких ви плануєте застосовувати автоматизацію.
=======
 
